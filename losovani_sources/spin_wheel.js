/*
 * Copyright (c) https://www.randomnamepicker.net/
 */
function alertPrize(){_winning_segment=theWheel.getIndicatedSegment(),$(".winner").html("Vítěz je "+_winning_segment.text).show(),$(".remove-name").html("Odstranit "+_winning_segment.text),$(".winner-btn-group").css("visibility","visible")}var theWheel,_names,_winning_segment,_wheelPower=0,_wheelSpinning=!1,_sound;$(document).ready(function(){function e(e){var n=e.length;theWheel=new Winwheel({canvasId:"canvas",numSegments:n,outerRadius:245,centerY:252.5,textFontSize:8,segments:e,animation:{type:"spinToStop",duration:6,spins:8,callbackFinished:"alertPrize()"},pins:!0})}function n(){0==_wheelSpinning&&(2==_wheelPower?theWheel.animation.spins=15:theWheel.animation.spins=8,theWheel.startAnimation(),_wheelSpinning=!0)}function t(){theWheel.stopAnimation(!1),theWheel.rotationAngle=0,theWheel.draw(),_wheelSpinning=!1}function a(e){"undefined"==typeof e&&(e=store.data.index||0);var n,t=store.data.names[e];n=Array.isArray(t)?t:t.names,$("#dial").val(e),$("#display").val(n.join("\n"))}function i(){store.get(),s(store.data.sw_option);var n=store.data.index||0,t=get_name_obj(n);_wheelPower=store.data.sw_option.speed,_names=name_method.get_names(t),bg_colors=["#eae56f","#89f26e","#7de6ef","#ffcccc"],segments=[],_names.forEach(function(e,n){segments.push({fillStyle:bg_colors[n%4],text:e})}),e(segments)}function s(e){2==e.speed?$("#fast-speed").prop("checked",!0):$("#normal-speed").prop("checked",!0)}$(".spin-trigger").click(function(){_names.length<=1?alert("There is only one name available! Please reset the names by clicking the 'Reset Names' button."):($(".winner-btn-group").css("visibility","hidden"),t(),n())}),$(".options").click(function(){$("#myOptionModal").modal({keyboard:!0})}),$("input[name='sw_speed']").click(function(){_wheelPower=$(this).val(),store.data.sw_option={speed:_wheelPower},store.save()}),$("#myModal").on("shown.bs.modal",function(){a()}),$(".modal-trigger").click(function(){$("#myModal").modal({keyboard:!0})}),$("#dial").on("click",function(){var e=$(this).val();a(e)}).on("dblclick",function(){var e=$(this).val(),n=$("#display").val();name_method.save_name(n,e)?location.reload():alert("Please enter names first before using this set.")}),$("#display").on("blur",function(){var e=$(this).val(),n=$("#dial").val();name_method.save_name(e,n)}),$(".remove-name").on("click",function(e){if(window._db_name_set){var n=_names.indexOf(_winning_segment.text);n>-1&&_names.splice(n,1),theWheel.deleteSegment(n+1),theWheel.draw(),$(".winner-btn-group").css("visibility","hidden")}else{var t=$(".winner").text().replace("The winner is ",""),n=store.data.index||0,a=get_name_obj(n),i=name_method.hide_name(a,t);store.set(i.names,i.access,n),location.reload()}}),$(".reset-name").on("click",function(){var e=store.data.index||0,n=store.data.names[e],t=name_method.reset_name(n);store.set(t.names,t.access,e),location.reload()}),i()});
